!function(t){"use strict";window.XT_ATC=window.XT_ATC||{},t((function(){var e,a,r,n;function o(){t("form .add_to_cart_button").each((function(){0===t(this).closest(".product-type-grouped").length&&t(this).removeClass("add_to_cart_button").addClass("single_add_to_cart_button")})),t("form.cart").each((function(){var e=t(this).find('[type="submit"]').not(".single_add_to_cart_button");e.length&&e.addClass("single_add_to_cart_button")}))}function d(t,e){return!l(e)}function c(a,r){r&&function(a){if(a.data("loading",!0),a.removeClass("added loading"),XT_ATC.overrideSpinner){e&&clearTimeout(e);var r=a.html(),n=window.getComputedStyle(a.get(0)),o=n.backgroundColor,d=n.color,c=n.width,i=n.height;a.data("html",r),a.addClass("xt_atc-loading"),a.css({backgroundColor:o,color:d,width:c,height:i});var s,l=a.find(".xt_atc-button-spinner-wrap");0===l.length?(l=t('<span class="xt_atc-button-spinner-wrap"></span>'),s=t('<span class="xt_atc-button-spinner '+XT_ATC.spinnerIcon+'"></span>'),l.html(s),a.html(l)):(s=l.find(".xt_atc-button-spinner")).removeClass(XT_ATC.checkmarkIcon).addClass(XT_ATC.spinnerIcon),e=setTimeout((function(){l.addClass("xt_atc-button-spinner-ready")}),5)}else a.addClass("loading")}(r),t(document.body).trigger("xt_atc_adding_to_cart",[r])}function i(e,a,r,n){n&&_(n),function(e){if(e&&e.hasOwnProperty(".woocommerce-notices-wrapper")&&t(e[".woocommerce-notices-wrapper"]).length)return t(e[".woocommerce-notices-wrapper"]).find(".woocommerce-error").length>0;return!1}(a)||t(document.body).trigger("xt_atc_added_to_cart",[{fragments:a},n,r])}function s(e){var a=t(e.currentTarget),n=a.closest("form");(function(e){if(e.closest(".wc-product-table").length||e.closest(".product").hasClass("product-type-external")||e.hasClass("wps_ubo_bump_add_to_cart_button")||function(e,a){var r=t(e).attr("class");if(!r||!a)return!1;r=r.split(" ");for(var n=0;n<r.length;n++)if("object"==typeof a&&a.hasOwnProperty("length")){for(var o=0;o<a.length;o++)if(null!==r[n].match(a[o]))return!0}else if(null!==r[n].match(a))return!0;return!1}(e,[/buy-now/,/buy_now/,/buynow/]))return!0;if(!XT_ATC.ajaxAddToCart&&!m(e))return!0;if(!XT_ATC.ajaxSinglePageAddToCart&&m(e))return!0;return!1})(a)||(e.preventDefault(),e.stopImmediatePropagation(),l(a)||function(t){return t.hasClass("disabled")}(a)||!function(e,a){var r=0,n=e.hasClass("grouped_form"),o=e.find(".quantity input.qty:visible");if(o.length&&(o.each((function(){t(this).removeClass("xt_atc-error");var e=""!==t(this).val()?parseInt(t(this).val()):0;(e<(t(this).get(0).hasAttribute("min")?parseInt(t(this).attr("min")):1)||!n&&e<=0)&&(t(this).addClass("xt_atc-error"),r++)})),n)){var d=0;o.each((function(){(""!==t(this).val()?parseInt(t(this).val()):0)<=0&&d++})),d>0&&o.length===d&&(o.addClass("xt_atc-error"),r++)}var c=e.find(".wc-pao-required-addon, .required-product-addon");if(c=t.merge(c,e.find(".tm-has-required + div.tm-extra-product-options-container").not(".tc-hidden div.tm-extra-product-options-container")),c=t.merge(c,e.find(".ppom-field-wrapper .show_required").closest(".form-group")),c=t.merge(c,e.find(".gfield_contains_required")),c.each((function(){var e=t(this);if(e.is(":visible")){var a=e.find(":input");"checkbox"===a.attr("type")||"radio"===a.attr("type")?(e.removeClass("xt_atc-error"),a.is(":checked")||(r++,e.addClass("xt_atc-error"))):(e.removeClass("xt_atc-error"),""===a.val()&&(r++,e.addClass("xt_atc-error")))}else e.removeClass("xt_atc-error")})),r>0){var i=e.find(".xt_atc-error").first(),s=g(a)?e:t("html,body");i.length&&s.animate({scrollTop:i.offset().top-100},500)}return 0===r}(n,a)||function(e,a){a.removeClass("added");var n=function(e,a){var r=new FormData(e.get(0));if(e.find("button").each((function(){var e=t(this).attr("name"),a=t(this).val();e&&a&&!r.has(e)&&r.append(e,a)})),t.each(a.data(),(function(t,e){r.has(t)||r.append(t,e)})),t.each(a[0].dataset,(function(t,e){r.has(t)||r.append(t,e)})),!r.has("add-to-cart")&&!r.has("product_id")&&e.attr("action")){var n=e.attr("action").match(/add-to-cart=([0-9]+)/),o=!!n&&n[1];o&&r.append("add-to-cart",o)}!r.has("add-to-cart")&&r.has("product_id")&&r.append("add-to-cart",r.get("product_id"));return r}(e,a);if(!1===t(document.body).triggerHandler("should_send_ajax_request.adding_to_cart",[a]))return t(document.body).trigger("ajax_request_not_sent.adding_to_cart",[!1,!1,a]),!0;t(document.body).trigger("adding_to_cart",[a,n]),t.ajaxPrefilter((function(t,e){-1!==t.url.search("xt_atc_single")&&(t.data=e.data)})),t.XT_Ajax_Queue({url:XT_ATC.ajaxUrl.toString().replace("%%endpoint%%","xt_atc_single"),enctype:"multipart/form-data",type:"post",data:n,processData:!1,contentType:!1,cache:!1,timeout:6e5}).done((function(e){XT_ATC.redirectionEnabled?window.location=XT_ATC.redirectionTo:(m(a)||g(a)||wc_add_to_cart_params.is_cart||0!==a.parent().find(".added_to_cart").length||a.after('<a href="'+wc_add_to_cart_params.cart_url+'" class="added_to_cart wc-forward" title="'+wc_add_to_cart_params.i18n_view_cart+'">'+wc_add_to_cart_params.i18n_view_cart+"</a>"),!m(a)&&e.fragments&&e.fragments.hasOwnProperty(".woocommerce-notices-wrapper")&&delete e.fragments[".woocommerce-notices-wrapper"],XT_ATC.singleRefreshFragments?(r={fragments:e.fragments,cart_hash:e.cart_hash,trigger:a},t(document.body).trigger("wc_fragment_refresh")):u(e.fragments,e.cart_hash,a))})).fail((function(){_(a)}))}(n,a))}function l(t){return!!t.data("loading")}function _(t){if(XT_ATC.overrideSpinner){a&&clearTimeout(a);var e=t.find(".xt_atc-button-spinner-wrap");if(e.length){e.removeClass("xt_atc-button-spinner-ready");var r=e.find(".xt_atc-button-spinner"),n={backgroundColor:"",color:"",width:"",height:""};a=setTimeout((function(){r.removeClass(XT_ATC.spinnerIcon).addClass(XT_ATC.checkmarkIcon),e.addClass("xt_atc-button-spinner-ready"),setTimeout((function(){t.html(t.data("html")),t.removeClass("xt_atc-loading").addClass("added"),t.removeData("loading"),t.css(n)}),2e3)}),300)}}else t.removeClass("loading").addClass("added"),t.removeData("loading")}function u(e,a,n){r=null,t(document.body).trigger("added_to_cart",[e,a,n]),function(e){var a=t(".woocommerce-notices-wrapper");m(e)&&a.length&&XT_ATC.singleScrollToNotice&&setTimeout((function(){var e=t(window).scrollTop(),r=a.offset().top-100;e>=r&&t("html,body").animate({scrollTop:r},500)}),XT_ATC.singleScrollToNoticeTimeout+500)}(n)}function f(){r&&u(r.fragments,r.cart_hash,r.trigger)}function g(t){var e=t.closest(".single-product");return e.length>0&&"BODY"!==e.prop("tagName")}function m(t){return!g(t)&&!function(t){var e=t.closest(".products"),a=t.closest(".xt_woovs-archives-product");return e.length>0||a.length>0}(t)&&XT_ATC.isProductPage}XT_ATC.ajaxAddToCart=!!XT_ATC.ajaxAddToCart,XT_ATC.ajaxSinglePageAddToCart=!!XT_ATC.ajaxSinglePageAddToCart,XT_ATC.isProductPage=!!XT_ATC.isProductPage,XT_ATC.singleRefreshFragments=!!XT_ATC.singleRefreshFragments,XT_ATC.singleScrollToNotice=!!XT_ATC.singleScrollToNotice,XT_ATC.singleScrollToNoticeTimeout=parseInt(XT_ATC.singleScrollToNoticeTimeout),XT_ATC.overrideSpinner=!!XT_ATC.overrideSpinner,XT_ATC.redirectionEnabled=!!XT_ATC.redirectionEnabled,o(),new MutationObserver((function(e){e.forEach((function(e){e.addedNodes&&e.addedNodes.length>0&&[].some.call(e.addedNodes,(function(e){return t(e).find("form.cart").length}))&&o()}))})).observe(document.body,{attributes:!0,childList:!0,characterData:!0}),t(document.body).on("should_send_ajax_request.adding_to_cart",d),t(document.body).on("adding_to_cart",c),t(document.body).on("added_to_cart",i),t(document.body).on("click.xt_atc",".single_add_to_cart_button",s),t(document.body).on("wc_fragments_refreshed",f),n=setInterval((function(){var e,a,r,o;!function(e,a,r){var n=t._data(e).events[a];return!!(n&&n.length>0)&&n[0].namespace===r}(document.body,"click","xt_atc")?(e=document.body,a="click",r="xt_atc",(o=t._data(e).events[a])&&o.length>0&&o.find((function(t,e){r===t.namespace&&o.unshift(o.splice(e,1)[0])}))):clearInterval(n)}),1e3)}))}(jQuery,window);